{{- if .Values.availabilityUpdater.enabled }}
apiVersion: v1
kind: ConfigMap
metadata:
  name: availability-updater-config
  namespace: {{ include "gpu-dev-server.controlplaneNamespace" . }}
  labels:
    {{- include "gpu-dev-server.labels" . | nindent 4 }}
    app: availability-updater
data:
  AWS_REGION: {{ .Values.cloudProvider.region | quote }}
  {{- if eq .Values.cloudProvider.name "aws" }}
  EKS_CLUSTER_NAME: {{ .Values.cloudProvider.aws.eksClusterName | quote }}
  {{- end }}
  {{- if eq .Values.cloudProvider.name "gcp" }}
  GKE_CLUSTER_NAME: {{ .Values.cloudProvider.gcp.gkeClusterName | quote }}
  {{- end }}
  POSTGRES_HOST: {{ include "gpu-dev-server.postgresHost" . }}
  POSTGRES_PORT: "5432"
  POSTGRES_USER: {{ .Values.postgres.auth.username | quote }}
  POSTGRES_DB: {{ .Values.postgres.auth.database | quote }}
{{- end }}
